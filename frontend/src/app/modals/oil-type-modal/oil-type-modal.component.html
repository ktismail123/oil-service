<div class="modal-overlay">
  <div class="modal-container">

    <!-- Modal Header -->
    <div class="modal-header">
      <h2>{{ isEditMode() ? 'Edit Oil Type' : 'Add New Oil Type' }}</h2>
      <button class="close-btn" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="modal-body">
      <form [formGroup]="oilTypeForm" (ngSubmit)="onSubmit()">

        <!-- Grade -->
        <div class="form-group">
          <label for="grade">Grade *</label>
          <input
            id="grade"
            type="text"
            formControlName="grade"
            class="form-input"
            placeholder="Enter grade (e.g., 5W30, 10W40)">
          <div *ngIf="isInvalid('grade')" class="error-msg">
            {{ getErrorMessage('grade') }}
          </div>
        </div>

        <!-- Brand and Service Interval Row -->
        <div class="form-row">
          <div class="form-group">
            <label for="brand">Brand *</label>
            <input
              id="brand"
              type="text"
              formControlName="brand"
              class="form-input"
              placeholder="Enter brand name">
            <div *ngIf="isInvalid('brand')" class="error-msg">
              {{ getErrorMessage('brand') }}
            </div>
          </div>

          <div class="form-group">
            <label for="serviceInterval">Service Interval *</label>
            <select id="serviceInterval" formControlName="service_interval" class="form-select">
              <option value="">Select service interval</option>
              <option value="5000">5,000 km</option>
              <option value="10000">10,000 km</option>
              <option value="15000">15,000 km</option>
            </select>
            <div *ngIf="isInvalid('service_interval')" class="error-msg">
              {{ getErrorMessage('service_interval') }}
            </div>
          </div>
        </div>

        <!-- Package Availability Section -->
        <div class="form-section">
          <h4>Package Availability</h4>
          <div class="package-grid">
            <div class="form-group">
              <label for="package1l">1L Package Available</label>
              <select id="package1l" formControlName="package_1l_available" class="form-select">
                <option value="1">Yes</option>
                <option value="0">No</option>
              </select>
            </div>

            <div class="form-group">
              <label for="package4l">4L Package Available</label>
              <select id="package4l" formControlName="package_4l_available" class="form-select">
                <option value="1">Yes</option>
                <option value="0">No</option>
              </select>
            </div>

            <!-- NEW: 5L Package Support -->
            <div class="form-group">
              <label for="package5l">5L Package Available</label>
              <select id="package5l" formControlName="package_5l_available" class="form-select">
                <option value="1">Yes</option>
                <option value="0">No</option>
              </select>
            </div>

            <div class="form-group">
              <label for="bulk">Bulk Available</label>
              <select id="bulk" formControlName="bulk_available" class="form-select">
                <option value="1">Yes</option>
                <option value="0">No</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Pricing Section -->
        <div class="form-section">
          <h4>Pricing (AED)</h4>
          <div class="pricing-grid">
            <div class="form-group">
              <label for="price1l">Price per 1L *</label>
              <input
                id="price1l"
                type="number"
                step="0.01"
                min="0"
                formControlName="price_1l"
                class="form-input"
                placeholder="Enter price for 1L">
              <div *ngIf="isInvalid('price_1l')" class="error-msg">
                {{ getErrorMessage('price_1l') }}
              </div>
            </div>

            <div class="form-group">
              <label for="price4l">Price per 4L *</label>
              <input
                id="price4l"
                type="number"
                step="0.01"
                min="0"
                formControlName="price_4l"
                class="form-input"
                placeholder="Enter price for 4L">
              <div *ngIf="isInvalid('price_4l')" class="error-msg">
                {{ getErrorMessage('price_4l') }}
              </div>
            </div>

            <!-- NEW: 5L Price Support -->
            <div class="form-group">
              <label for="price5l">Price per 5L *</label>
              <input
                id="price5l"
                type="number"
                step="0.01"
                min="0"
                formControlName="price_5l"
                class="form-input"
                placeholder="Enter price for 5L">
              <div *ngIf="isInvalid('price_5l')" class="error-msg">
                {{ getErrorMessage('price_5l') }}
              </div>
            </div>

            <div class="form-group">
              <label for="pricePerLiter">Price per Liter *</label>
              <input
                id="pricePerLiter"
                type="number"
                step="0.01"
                min="0"
                formControlName="price_per_liter"
                class="form-input"
                placeholder="Enter bulk price per liter">
              <div *ngIf="isInvalid('price_per_liter')" class="error-msg">
                {{ getErrorMessage('price_per_liter') }}
              </div>
            </div>
          </div>
        </div>

        <!-- Status and Quantity Row -->
        <!-- <div class="form-row">
          <div class="form-group">
            <label for="status">Status</label>
            <select id="status" formControlName="status" class="form-select">
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
          </div>

          <div class="form-group">
            <label for="quantity">Quantity Available</label>
            <input
              id="quantity"
              type="number"
              min="0"
              formControlName="quantity_available"
              class="form-input"
              placeholder="Enter available quantity">
          </div>
        </div> -->

        <!-- Success & Error Messages -->
        <div *ngIf="successMessage()" class="success-msg">
          {{ successMessage() }}
        </div>
        <div *ngIf="errorMessage()" class="error-msg">
          {{ errorMessage() }}
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancel</button>
          <button type="submit" class="btn btn-primary" [disabled]="isSubmitting()">
            <span *ngIf="isSubmitting()">{{ isEditMode() ? 'Updating...' : 'Creating...' }}</span>
            <span *ngIf="!isSubmitting()">{{ isEditMode() ? 'Update Oil Type' : 'Create Oil Type' }}</span>
          </button>
        </div>

      </form>
    </div>
  </div>
</div>